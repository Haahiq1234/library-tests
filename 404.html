<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>404</title>
	<style>
		body {}

		/* * {
			box-sizing: border-box;
			padding: 0;
			margin: 0;
			outline: 0;
		}

		body {
			background-color: grey;
		}

		ul {
			list-style-type: none;
		}

		.lst {
			height: 50px;
			text-align: center;
			border: solid 1px black
		}

		a {} */

		ul {
			align-items: center;
			list-style-type: none;
			margin: 0;
			padding: 0;
			width: 200px;
			background-color: #f1f1f1;
		}

		li a {
			display: block;
			color: #000;
			padding: 8px 16px;
			text-decoration: none;
		}

		/* Change the link color on hover */
		li a:hover {
			background-color: #555;
			color: white;
		}
	</style>
</head>

<body>
	<script>
		function getcurrentDirectory() {
			let url = location.href.replace("404.html", "");
			if (url.includes("library-tests/")) {
				return url.split("library-tests/")[1];
			}
			return url.split("library%20tests/")[1];
		}

		async function getDirectoryFiles(dir, url) {
			const response = await fetch('https://api.github.com/repos/Haahiq1234/library-tests/contents/' + dir + '?ref=main');
			const data = await response.json();
			console.log(data);
			if (data.message == "Not Found") {
				console.log("Page not Found. retaking to old one");
				window.location.href.replace("Haahiq1234.github.io/library-tests/");
				console.log("Taken");
				getDirectoryFiles("", "");
				return;
			}
			let htmlString = '<ul>';
			for (let file of data) {
				htmlString += `<li class="lst"><a href="${url + file.path}">${file.path}</a></li>`;
			}

			htmlString += '</ul>';
			document.getElementsByTagName('body')[0].innerHTML = htmlString;
		}
		getDirectoryFiles(getcurrentDirectory(), location.href.replace("404.html", ""));
	</script>
</body>

</html>