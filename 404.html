<html>

<body>
	<script>
		function getcurrentDirectory() {
			let url = location.href.replace("404.html", "");
			if (url.includes("library-tests/")) {
				return url.split("library-tests/")[1];
			}
			return url.split("library%20tests/")[1];
		}

		async function getDirectoryFiles(dir) {
			const response = await fetch('https://api.github.com/repos/Haahiq1234/library-tests/contents/' + dir + '?ref=main');
			const data = await response.json();
			return data;
		}
		let data = getDirectoryFiles(getcurrentDirectory());
		data.then(function (data) {
			console.log(data);
			let htmlString = '<ul>';

			for (let file of data) {
				htmlString += `<li><a href="${file.path}">${file.name}</a></li>`;
			}

			htmlString += '</ul>';
			document.getElementsByTagName('body')[0].innerHTML = htmlString;
		});
	</script>
</body>

</html>