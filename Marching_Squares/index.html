<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <script src="../Canvas.js"></script>
    <script src="../noise.js"></script>
    <script src="script.js"></script>
    <script>
        const grid = new Grid(80, 80);
        const radius = 25;
        var mousewidth;
        var mouseheight;
        function setUp() {
            createCanvas(400, 400);
            frameRate(60);

            grid.init();
            console.log(grid);
            grid.draw();

            mousewidth = floorDiv(2 * radius, grid.cellwidth) + 1;
            mouseheight = floorDiv(2 * radius, grid.cellheight) + 1;
        }
        const innerRadius = 3;
        function draw() {
            //clear();
            if (mousePressed) {
                if (mouse.x > CanvasWidth || mouse.y > CanvasHeight) return;
                clear(mouse.x - radius, mouse.y - radius, radius * 2, radius * 2);
                let x = floorDiv(mouse.x - radius, grid.cellwidth);
                let y = floorDiv(mouse.y - radius, grid.cellwidth);
                //console.log(x, y, mousewidth, mouseheight);
                for (var i = x + innerRadius; i < x + mousewidth - innerRadius; i++) {
                    for (var j = y + innerRadius; j < y + mouseheight - innerRadius; j++) {
                        let k = grid.index(i, j);
                        if (grid.array[k] < MAX_VALUE) {
                            grid.array[k] += 0.2;
                        }
                    }
                }
                grid.draw(x, y, mousewidth, mouseheight);
            }
            if (mousePressed) {
                if (mouse.x > CanvasWidth || mouse.y > CanvasHeight) return;
                clear(mouse.x - radius, mouse.y - radius, radius * 2, radius * 2);
                let x = floorDiv(mouse.x - radius, grid.cellwidth);
                let y = floorDiv(mouse.y - radius, grid.cellwidth);
                //console.log(x, y, mousewidth, mouseheight);
                for (var i = x + innerRadius; i < x + mousewidth - innerRadius; i++) {
                    for (var j = y + innerRadius; j < y + mouseheight - innerRadius; j++) {
                        let k = grid.index(i, j);
                        if (grid.array[k] < MAX_VALUE) {
                            grid.array[k] += 0.2;
                        }
                    }
                }
                grid.draw(x, y, mousewidth, mouseheight);
            }
        }
        function key_Press() {

        }
    </script>
</body>

</html>