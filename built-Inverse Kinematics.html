<html>
<head>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <script>
function createVector(x, y) {
    return new Vector2(x | 0, y | 0);
}
const Vector = {};
Vector.array = function (...vecs) {
    let ans = [];
    for (var vec of vecs) {
        ans.push(...vec.array());
    }
    return ans;
}
Vector.setRotation = function (a, b, rot) {
    let c = Vector.sub(b, a);
    c.setRotation(rot);
    return Vector.add(a, c);
}
Vector.interpolateArray = function (arr, index) {
    let i = floor(index);
    let ir = index - i;
    let ans = arr[i].copy();
    if (i < arr.length - 1 && ir > 0) {
        let subbed = Vector.sub(arr[i + 1], ans);
        ans.add(Vector.mult(subbed, ir));
    }
    return new Vector2(ans.x, ans.y);
}
Vector.setMag = function (vec, mag) {
    let vec1 = Vector.copy(vec).setMag(mag);
    return vec1;
}
Vector.InSquare = function (a, b, p) {
    if (p.x >= a.x && p.y >= a.y && p.x <= b.x && p.y <= b.y) {
        return true;
    }
    return false
}
Vector.AngleToEllipse = function (ang, px, py, rot = 0, nx = px, ny = py) {
    let x = Math.cos(radians(ang));
    let y = Math.sin(radians(ang));
    if (x < 0) {
        x *= nx;
    } else if (x > 0) {
        x *= px;
    }
    if (y < 0) {
        y *= ny;
    } else if (y > 0) {
        y *= py;
    }
    let vec = new Vector2(x, y);
    vec.rotate(rot);
    return vec;
}
Vector.mid = function (a, b) {
    let c = Vector.sub(b, a).mult(0.5);
    let p = Vector.add(a, c);
    return p;
}
Vector.copy = function (vec) {
    return new Vector2(vec.x, vec.y);
}
Vector.SideOfLine = function (a, b, p) {
    let c = Vector.mid(a, b);
    let dir = Vector.Direction(c, p);
    let aa = Vector.Direction(c, a);
    let ba = Vector.Direction(c, b);
    if (BetweenRotations(aa, ba, dir)) {
        return -90;
    } else {
        return 90;
    }
}
Vector.normal = function (a, b, p) {
    let rot = this.SideOfLine(a, b, p);
    let c = Vector.DirectionVector(a, b);
    c.rotate(rot);
    return c;
}
function BetweenRotations(a, b, r) {
    if (r + 90 > 360 && b < r) {
        b += 360;
    }
    if (r - 90 < 0 && r < a) {
        a -= 360;
    }
    return (r >= a && r <= b);
}
Vector.constaint = function (p, a, b) {
    let x = constraint(p.x, a.x, b.x);
    let y = constraint(p.y, a.y, b.y);
    return createVector(x, y);
}
Vector.interpolate = function (a, b, t) {
    let c = Vector.sub(b, a);
    c.mult(t);
    return Vector.add(a, c);
}
Vector.lerp = function (A, B, t) {
    let C = Vector.sub(B, A);
    C.mult(t);
    C.add(A);
    return C;
}
Vector.mult = function (vec, m) {
    vec = new Vector2(vec.x * m, vec.y * m);
    return vec;
}
Vector.min = function (...args) {
    args = splitArray(args);
    return createVector(Math.min(...args.x), Math.min(...args.y));
}
Vector.neg = function (vec) {
    return new Vector2(-vec.x, -vec.y);
}
Vector.avg = function (...vecs) {
    let vector = new Vector2(0, 0);
    for (var i = 0; i < vecs.length; i++) {
        vector.add(vecs[i]);
    }
    vector.div(vecs.length);
    return vector;
}
Vector.max = function (...args) {
    args = splitArray(args);
    return createVector(Math.max(...args.x), Math.max(...args.y));
}
Vector.add = function () {
    var vec = arguments[0].copy();
    for (var i = 1; i < arguments.length; i++)
        vec.add(arguments[i].copy());
    return new Vector2(vec.x, vec.y);
}
Vector.sub = function (vec, vec1) {
    vec = vec.copy();
    vec1 = vec1.copy();
    vec.sub(vec1);
    return new Vector2(vec.x, vec.y);
}
Vector.heading = function (vec) {
    if (vec.x == 0 && vec.y == 0) {
        return 0;
    }
    var ang = Math.atan2(vec.x, vec.y);
    ang = 180 - degrees(ang);
    ang -= 90;
    if (ang < 0) {
        ang = 360 + ang;
    }
    return ang;
}
Vector.AngleToVector = function (ang, rad) {
    let x = rad * Math.cos(radians(ang));
    let y = rad * Math.sin(radians(ang));
    return new Vector2(x, y);
}
Vector.div = function (vec, no) {
    vec = vec.copy();
    vec.div(no);
    return vec;
}
Vector.random2D = function () {
    return this.AngleToVector(Random.range(0, 360), 1);
}
Vector.DirectionVector = function (vec, vec1) {
    let d = new Vector2(vec1.x - vec.x, vec1.y - vec.y).normalize();
    return d;
}
Vector.Direction = function (a, b) {
    return this.DirectionVector(a, b).heading();
}
Vector.dist = function (vec, vec1, x1, y1) {
    let d = new Vector2(vec1.x - vec.x, vec1.y - vec.y).mag();
    return d;
}
Vector.limitDistance = function (a, b, lim) {
    let c = Vector.sub(b, a);
    c.limit(lim);
    return Vector.add(a, c);
}
Vector.setDist = function (a, b, dst) {
    let c = Vector.sub(b, a);
    let ang = c.heading();
    let d = Vector.AngleToVector(ang, dst);
    return Vector.add(a, d);
}
function Vector2(x, y) {
    this.x = x;
    this.y = y;
    this.add = function (addition, y) {
        if (y) {
            this.x += addition;
            this.y += y;
            return this;
        }
        this.x += addition.x;
        this.y += addition.y;
        return this;
    }
    this.array = function () {
        return [this.x, this.y];
    }
    this.mult = function (pow) {
        this.x *= pow;
        this.y *= pow;
        return this;
    }
    this.reset = function () {
        this.x = 0;
        this.y = 0;
        return this;
    }
    this.sub = function (vec, y) {
        if (y) {
            this.x -= vec;
            this.y -= y;
            return this;
        }
        this.x -= vec.x;
        this.y -= vec.y;
        return this;
    }
    this.rotate = function (deg) {
        let dir = this.heading();
        let len = this.mag();
        dir += deg;
        let vec = Vector.AngleToVector(dir, len);
        this.x = vec.x;
        this.y = vec.y;
    }
    this.set = function (nx, ny) {
        this.x = nx;
        this.y = ny;
        return this;
    }
    this.setMag = function (len) {
        this.normalize().mult(len);
        return this;
    }
    this.setRotation = function (rot) {
        let mag = this.mag();
        let vec = Vector.AngleToVector(rot, mag);
        this.set(vec.x, vec.y);
        return this;
    }
    this.mag = function () {
        return Math.sqrt(this.x ** 2 + this.y ** 2);
    }
    this.copy = function () {
        return new Vector2(this.x, this.y);
    }
    this.normalize = function () {
        this.div(this.mag());
        return this;
    }
    this.div = function (no) {
        this.x /= no;
        this.y /= no;
        return this;
    }
    this.neg = function () {
        return Vector.neg(this);
    }
    this.limit = function (no) {
        if (this.mag() > no)
            this.setMag(no);
        return this;
    }
    this.heading = function () {
        return Vector.heading(this);
    }
    this.xSlope = function () {
        return this.x / numberSign.positive(this.y);
    }
    this.ySlope = function () {
        return this.y / numberSign.positive(this.x);
    }
    this.setX = function (val) {
        let sl = this.ySlope();
        this.x = val;
        this.y = sl * numberSign.positive(val);
        return this;
    }
    this.setY = function (val) {
        let sl = this.xSlope();
        this.x = sl * numberSign.positive(val);
        this.y = val;
        return this;
    }
}





</script>
    <script>
        // using [Input]
        var FramesPerSecond = 100;
        var tentacle;
        var segmentLength = 50;
        var tentacle1;
        function setUp() {
            createCanvas(500, 500, "black");
            frameRate(FramesPerSecond); //
            //Canvas.flipY();
            tentacle = new Tentacle(CanvasWidth / 2, CanvasHeight, 50, 30);
            tentacle1 = new Tentacle(CanvasWidth / 2, 0, 5, 100);
        }
        function draw() {
            backGround(0, 10);
            Canvas.flipY();
            tentacle.follow(mouse2);
            tentacle.show();
            tentacle1.follow(mouse2);
            tentacle1.show();
        }
        function segment(x, y, len) {
            this.a = new Vector2(x, y);
            this.len = len;
            this.angle = 0;
            this.b = Vector.AngleToVector(this.angle, this.len);
            this.calB = function () {
                this.b = Vector.add(Vector.AngleToVector(this.angle, this.len), this.a);
            }
            this.follow = function (ve) {
                var vec = Vector.sub(ve, this.a);
                this.angle = vec.heading();// - 90;
                this.calB();

                let vec1 = Vector.sub(ve, this.b);
                this.a.add(vec1);
            }
            this.show = function () {
                stroke("white");
                lineWidth(2);
                this.calB();
                line(this.a.x, this.a.y, this.b.x, this.b.y);
            }
        }
        function Tentacle(x, y, len, size) {
            this.pos = new Vector2(x, y);
            this.segs = [];
            this.size = size;
            this.len = len;
            for (var i = 0; i < this.size; i++) {
                this.segs.push(new segment(x, y - this.len * i, this.len));
            }
            this.follow = function (obj) {
                this.segs[this.size - 1].follow(obj);
                for (var i = this.size - 2; i >= 0; i--) {
                    this.segs[i].follow(this.segs[i + 1].a);
                }
                this.segs[0].a = this.pos.copy();
                this.segs[0].calB();
                for (var i = 1; i < this.size; i++) {
                    this.segs[i].a = this.segs[i - 1].b.copy();
                    this.segs[i].calB();
                }
            }
            this.show = function () {
                for (var i = 0; i < this.size; i++) {
                    this.segs[i].show();

                }
            }
        }
    </script>

</body>
</html>
