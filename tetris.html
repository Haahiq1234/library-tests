<html>
<head>
    <link rel="stylesheet" href="style.css"/>
</head>
<body>
    <script src="Canvas.js"></script>
    <script>
        let grid = new Array2D(10, 19);
        let blocks = [];
        let width = 30;
        let outerWidth = 4;
        function setUp() {
            createCanvas(grid.width * width, grid.height * width);
            frameRate(60);
            blocks.push(new Block(0, 0, color(255, 255, 0)));
        }
        function draw() {
            clear();
            for (var block of blocks) {
                block.draw();
            }
            for (var i = 0; i < grid.array.length; i++) {
                let col = grid.array[i];
                if (col) {
                    let pos = grid.pos(i);
                    console.log(pos);
                    fill(col);
                    rect(pos.col, pos.row, width, width);
                }
            }
        }
        class Block {
            constructor(x, y, col) {
                this.id = blocks.length;
                this.x = x;
                this.y = y;
                this.posX = x * width;
                this.posY = y * width;
                this.color = splitRGB(col);
                this.outerColor = this.color.mult(0.8);
                this.color = this.color.string();
            }
            draw() {
                this.y = floor(this.posY / width);
                if (!grid.get(this.x, this.y + 1) && this.y < grid.height - 1) {
                    this.posY += width / 10;
                } else {
                    grid.set(this.x, this.y, color(0, 255, 0));
                    console.log(grid.index(this.x, this.y));
                    blocks.splice(this.id, 1);
                }


                noStroke();
                fill(this.color);
                rect(this.posX + outerWidth / 2, this.posY + outerWidth / 2, width - outerWidth / 2, width - outerWidth / 2);

                stroke(this.outerColor);
                lineWidth(outerWidth);
                nofill();
                rect(this.posX + outerWidth / 2, this.posY + outerWidth / 2, width - outerWidth / 2, width - outerWidth / 2);
            }
        }
        function ln(A, B) {
            line(A.x, A.y, B.x, B.y);
        }
        function pt(P) {
            circle(P.x, P.y, 2);
        }
    </script>

</body>
</html>
